<style>

#map-spot-new-form {

  padding-bottom:0px;

}

</style>

<form class="form well" role="form" style="margin-bottom:0px;" id="map-spot-new-form" ng-submit="insertSpot()">
  <div class="row">
    <div class="col-lg-12">
      <p class="lead">New Spot
        <span class="pull-right">
          <a ui-sref="map({mapId:$stateParams.mapId})"><span class="badge badge-important">x close</span></a>
        </span>
      </p>  
    </div>
    <div class="form-group col-lg-12">
      <div class="btn-group btn-group-justified">
        <a href="" ng-click="switchLocationType(locationGeo)" ng-class="{'btn btn-primary': locationType == locationGeo,'btn btn-default': locationType == locationAddress}" id="newMapPublic" data-ng-model="newMap.public"><i class="icon-screenshot icon-large"></i> My Location</a>
        <a href="" ng-click="switchLocationType(locationAddress)" ng-class="{'btn btn-primary': locationType == locationAddress,'btn btn-default': locationType == locationGeo}" id="newMapPrivate" data-ng-model="newMap.private"><i class="icon-align-justify icon-large"></i> Address</a>
      </div>
    </div>
    <div class="form-group col-lg-12" id="newSpotLocationAddressContainer" style="display:none">
      <input type="text" class="form-control" placeholder="Type an address" data-ng-model="newSpot.locationAddress" name="newSpotLocationAddress" id="newSpotLocationAddress">
    </div>

    <div class="form-group col-lg-12">
      <label for="newSpotTitle" class="sr-only">Title</label>
      <input type="text" id="newSpotTitle" placeholder="Name" data-ng-model="newSpot.title" class="form-control">
    </div>

    <div class="form-group col-lg-12">
      <label for="newSpotDescription" class="sr-only">Description</label>
      <textarea id="newSpotDescription" rows="2" data-ng-model="newSpot.description" placeholder="Description" class="form-control"></textarea>
    </div>

    <div class="form-group col-lg-12">
      <button data-ng-disabled="!newSpot.title" class="btn btn-primary">Add Spot</button>
    </div>
  </form>
<script>
    $('#newSpotTitle').focus();
    
    // If the current position is not already displayed, launch a new geoLocation
    if (typeof spotMap.geoPosition.marker === "undefined") {
      // The geoLocate function will calculate the position and then center the map on it
      spotMap.geoLocate();
    } else {
      // Just center the map on the geoPosition
      spotMap.centerOnGeoPosition();
    }
</script>
