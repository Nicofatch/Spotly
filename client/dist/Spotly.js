/*! Spotly - v0.0.1 - 2014-04-02
 * Copyright (c) 2014 Nicolas Sorre;
 */
angular.module("activity",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("activity",{url:"/activity",views:{navbar:{templateUrl:"navbar/navbar.tpl.html",controller:"NavbarController"},main:{templateUrl:"activity/activity.tpl.html",controller:"ActivityController"}},data:{fixed:!1,search:!0}})}]).controller("ActivityController",["$log",function(a){a("ActivityController init")}]);var app=angular.module("app",["ui.router","ui.utils","explore","spot","directives.spotList","directives.displaySlider","directives.input","home","navbar","services.httpRequestTracker","security","activity","user","services.i18nNotifications","notifications","I18N","templates.app","templates.common"]).run(["$rootScope","$state","$stateParams","security",function(a,b,c,d){a.$state=b,a.$stateParams=c,d.requestCurrentUser(),a.$watch(function(){return d.currentUser},function(b){a.currentUser=b})}]).config(["$httpProvider",function(a){delete a.defaults.headers.common["X-Requested-With"]}]).constant("appSettings",{apiUri:"/api",apiServer:"http://ec2-54-72-73-223.eu-west-1.compute.amazonaws.com:8080"});angular.module("app").controller("HeaderCtrl",["$scope","$location",function(a,b){a.location=b,a.isAuthenticated=!1,a.isAdmin=!1}]),angular.module("explore",["ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(a){a.state("explore",{url:"/explore",views:{navbar:{templateUrl:"navbar/navbar.tpl.html",controller:"NavbarController"},main:{templateUrl:"explore/explore.tpl.html",controller:"ExploreController"}},data:{fixed:!0,search:!0}}).state("explore.query",{url:"/:k/:l"})}]).controller("ExploreController",["$scope","$rootScope","spotsService","appSettings",function(a,b,c,d){function e(){console.log("ExploreController - init"),a.spots={},"around"===a.l.type?f(function(b){c.searchSpots({k:a.k.value,lat:b.coords.latitude,lng:b.coords.longitude}).then(function(b){a.spots=b})}):$.ajax({url:d.apiServer+d.apiUri+"/geocode/json?address="+a.l.value+"&sensor=false"}).done(function(d){d=JSON.parse(d),b.l.value=d.results[0].formatted_address,c.searchSpots({k:a.k.value,lat:d.results[0].geometry.location.lat,lng:d.results[0].geometry.location.lng}).then(function(b){a.spots=b})})}function f(a){navigator.geolocation&&navigator.geolocation.getCurrentPosition(a)}a.$watch("$state.params",function(){e()}),a.like=function(b){a.spots[b].likes.push("Nicolas"),c.updateSpot(a.spots[b])}}]),angular.module("home",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("home",{url:"/",views:{navbar:{templateUrl:"navbar/navbar.tpl.html",controller:"NavbarController"},main:{templateUrl:"home/home.tpl.html",controller:"HomeController"}},data:{fixed:!1,search:!1}})}]).controller("HomeController",["$scope","$state","appSettings",function(a,b,c){console.log("HomeController init"),a.search={k:{type:"all",value:""},l:{type:"around",value:""}},a.tagsAutocompleteOptions={serviceUrl:c.apiServer+c.apiUri+"/tags/search/"},a.explore=function(){if(!a.search.k.type){var c=a.search.k;a.search.k=c.length?{value:c,type:"freetext"}:{value:"All Sports",type:"all"}}if(!a.search.l.type){var d=a.search.l;a.search.l=d.length?{value:d,type:"freetext"}:{value:"My Location",type:"around"}}b.go("explore.query",{k:"all"===a.search.k.type?"all":a.search.k.value,l:"around"===a.search.l.type?"around":a.search.l.value})}}]),angular.module("navbar",["security","services.httpRequestTracker"]).controller("NavbarController",["$scope","appSettings","$rootScope","$state","security","httpRequestTracker",function(a,b,c,d,e,f){function g(){console.log("NavbarController - init"),a.search=d.current.data.search,a.fixed=d.current.data.fixed,c.isAuthenticated=e.isAuthenticated,c.isAdmin=e.isAdmin,c.k={type:"all",value:""},c.l={type:"around",value:""},d.params.k&&"all"!==d.params.k?(c.k.value=d.params.k,c.l.type="tag"):(c.k.value="All Sports",c.k.type="all"),d.params.l&&"around"!==d.params.l?(c.l.value=d.params.l,c.l.type="address"):(c.l.value="My Location",c.l.type="around")}a.tagsAutocompleteOptions={serviceUrl:b.apiServer+b.apiUri+"/tags/search/"},a.$watch("$state.params",function(){g()}),a.hasPendingRequests=function(){return f.hasPendingRequests()}}]).controller("ExploreFormController",["$scope","$state",function(a,b){a.explore=function(){if(!a.k.type){var c=a.k;a.k=c.length?{value:c,type:"freetext"}:{value:"All Sports",type:"all"}}if(!a.l.type){var d=a.l;a.l=d.length?{value:d,type:"freetext"}:{value:"My Location",type:"around"}}b.go("explore.query",{k:"all"===a.k.type?"all":a.k.value,l:"around"===a.l.type?"around":a.l.value})}}]),angular.module("notifications",[]).controller("NotificationsController",["$scope","i18nNotifications",function(a,b){function c(){console.log("NotificationsController - init"),a.notifications=b,a.removeNotification=function(a){b.remove(a)},a.$on("$locationChangeError",function(a,c,d,e){b.pushForCurrentRoute("errors.route.changeError","error",{},{rejection:e})})}c()}]),angular.module("spot.comment",["angularFileUpload"]).controller("CommentController",["$scope","$state","spotsService","$upload","appSettings",function(a,b,c,d,e){function f(){console.log("CommentController - init")}a.uploads=[],f(),a.insertComment=function(){var d={title:a.comment.title,body:a.comment.body,pictures:a.comment.pictures||[],spot_id:a.spot._id,author_id:a.currentUser._id};c.insertComment(d).then(function(){}),a.comments.push(d),b.go("spot")},a.atLeastOnePicture=function(){return a.comment.title?a.comment.pictures.length>0:!1},a.onFileSelect=function(b){a.selectedFiles=b;for(var c=a.uploads.length,d=0;d<b.length;d++){var e=b[d];a.start(d+c,e)}},a.start=function(b,c){a.uploads[b]=d.upload({url:e.apiServer+e.apiUri+"/pictures",method:"POST",data:{},file:c}).progress(function(c){a.uploads[b].progress=parseInt(100*c.loaded/c.total),a.$digest()}).success(function(b){a.comment.pictures||(a.comment.pictures=[]),a.comment.pictures.push({url:b})}),a.uploads[b].name=c.name},a.enableAddStory=function(){if(!a.comment)return!1;if(!a.comment.body||!a.comment.title)return!1;for(var b=0;b<a.uploads.length;b++)if(console.log(a.uploads[b].progress),a.uploads[b].progress<100)return!1;return!0}}]),angular.module("spot.data",["ui.bootstrap.rating"]).controller("DataController",["$scope","$state","spotsService","i18nNotifications",function(a){a.rate=5,a.max=5,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.ratingStates=[{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"}]}]).controller("DataEditController",["$scope",function(a){a.addData=function(){var b={key:"",value:"",type:"km"};a.data.table.push(b)},a.changeType=function(b,c){a.data.table[b].type=c},a.removeData=function(b){a.data.table.splice(b,1)}}]),angular.module("spot.header",[]).controller("SpotHeaderController",function(){function a(){console.log("SpotHeaderController - init")}a()}).controller("SpotHeaderEditController",["$scope","appSettings",function(a,b){function c(){console.log("SpotHeaderEditController - init")}c(),a.updateMarker=function(){a.spot.address.value&&$.ajax({url:b.apiServer+b.apiUri+"/geocode/json?address="+a.spot.address.value+"&sensor=false"}).done(function(b){b=JSON.parse(b),a.spot.loc[1]=b.results[0].geometry.location.lat,a.spot.loc[0]=b.results[0].geometry.location.lng,a.$apply()})}}]),angular.module("spot",["spot.comment","spot.topo","spot.data","spot.header"]).config(["$stateProvider","$urlRouterProvider",function(a){a.state("spot",{url:"/spot/:id",views:{navbar:{templateUrl:"navbar/navbar.tpl.html",controller:"NavbarController"},main:{templateUrl:"spot/spot.tpl.html",controller:"SpotController"},"spot.topo":{templateUrl:"spot/topo/topo.tpl.html",controller:"TopoController"},"spot.data":{templateUrl:"spot/data/data.tpl.html",controller:"DataController"},"spot.header":{templateUrl:"spot/header/header.tpl.html",controller:"SpotHeaderController"}},data:{fixed:!1,search:!0}}).state("spot.edit",{url:"/edit",views:{"spot.header":{templateUrl:"spot/header/header.edit.tpl.html",controller:"SpotHeaderEditController"},"spot.edit.toolbar":{templateUrl:"spot/spot.edit.tpl.html",controller:"SpotEditController"},"topo.main":{templateUrl:"spot/topo/topo.edit.tpl.html"},"data.main":{templateUrl:"spot/data/data.edit.tpl.html",controller:"DataEditController"}}}).state("spot.comment",{url:"/comment",views:{"comment.action":{template:" "},"comment.form":{templateUrl:"spot/comment/comment.edit.tpl.html",controller:"CommentController"}}})}]).controller("SpotController",["$scope","spotsService","$stateParams","$sce","$location","$anchorScroll","$state","appSettings",function(a,b,c,d,e,f,g,h){function i(){console.log("SpotController - init"),a.spot=b.getSpot(c.id).then(function(b){a.spot=b}),a.comments=b.getComments(c.id).then(function(b){a.comments=b}),a.topo=b.getTopo(c.id).then(function(b){a.topo=b,a.safeTopoText=d.trustAsHtml(a.topo.text)}),a.data=b.getData(c.id).then(function(b){a.data=b})}a.spot={},a.comments=[],a.topo={},a.editMode=!1,a.rate=5,a.max=5,a.isReadonly=!1,a.hoveringOver=function(b){a.overStar=b,a.percent=100*(b/a.max)},a.ratingStates=[{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"},{stateOn:"fa fa-star",stateOff:"fa fa-star-o"}],i(),a.scrollToStories=function(){e.hash("stories"),f()},a.$on("$stateChangeSuccess",function(){a.editMode="spot.edit"===g.current.name?!0:!1}),a.mapMode=function(){return a.editMode?"edit":"view"},a.updateAddress=function(b){a.spot.loc=b,a.spot.loc&&$.ajax({url:h.apiServer+h.apiUri+"/geocode/json?latlng="+a.spot.loc[1]+","+a.spot.loc[0]+"&sensor=false"}).done(function(b){b=JSON.parse(b),a.spot.address={value:b.results[0].formatted_address,type:"address"},a.$apply()})}}]).controller("SpotEditController",["$scope","spotsService","$stateParams","$sce","$location","$anchorScroll","$state",function(a,b,c,d,e,f,g){a.save=function(){b.updateData(a.data).then(function(){}),a.safeTopoText=d.trustAsHtml(a.topo.text),b.updateTopo(a.topo).then(function(){}),b.updateSpot(a.spot).then(function(){}),g.go("spot")}}]),angular.module("spot.topo",[]).controller("TopoController",function(){function a(){console.log("TopoController - init")}a()}),angular.module("user",[]).config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/"),a.state("user",{url:"/user",views:{navbar:{templateUrl:"/js/app/navbar/navbar.tpl.html",controller:"NavbarController"},main:{templateUrl:"/js/app/user/user.tpl.html",controller:"UserController"}},data:{fixed:!1,search:!0}})}]).controller("UserController",function(){console.log("UserController init")}),angular.module("directives.displaySlider",[]).directive("displaySlider",["$timeout",function(a){var b={transclude:!0,scope:{sliderId:"@"},link:function(b){a(function(){$("#"+b.sliderId).each(function(){$(this).amazingslider({lightboxmode:!0,lightboxid:$(this).attr("id"),jsfolder:"/static/img/",width:690,height:0,skinsfoldername:"",loadimageondemand:!1,isresponsive:!0,autoplayvideo:!1,pauseonmouseover:!1,addmargin:!0,randomplay:!1,playvideoonclickthumb:!0,slideinterval:5e3,enabletouchswipe:!0,transitiononfirstslide:!1,loop:0,autoplay:!1,navplayvideoimage:"play-32-32-0.png",navpreviewheight:60,timerheight:2,shownumbering:!1,skin:"Gallery",textautohide:!1,addgooglefonts:!0,navshowplaypause:!0,navshowplayvideo:!0,navshowplaypausestandalonemarginx:8,navshowplaypausestandalonemarginy:8,navbuttonradius:0,navthumbnavigationarrowimageheight:32,navpreviewarrowheight:8,showshadow:!1,navfeaturedarrowimagewidth:16,navpreviewwidth:120,googlefonts:"Inder",textpositionmarginright:24,bordercolor:"#ffffff",navthumbnavigationarrowimagewidth:32,navthumbtitlehovercss:"text-decoration:underline;",arrowwidth:32,texteffecteasing:"easeOutCubic",texteffect:"",navspacing:8,navarrowimage:"navarrows-28-28-0.png",ribbonimage:"ribbon_topleft-0.png",navwidth:52,showribbon:!1,arrowtop:50,timeropacity:.6,navthumbnavigationarrowimage:"carouselarrows-32-32-0.png",navshowplaypausestandalone:!1,navpreviewbordercolor:"#ffffff",ribbonposition:"topleft",navthumbdescriptioncss:"display:block;position:relative;padding:2px 4px;text-align:left;font:normal 12px Arial,Helvetica,sans-serif;color:#333;",navborder:0,navthumbtitleheight:20,textpositionmargintop:24,navswitchonmouseover:!1,playvideoimage:"playvideo-64-64-0.png",arrowimage:"arrows-32-32-0.png",textstyle:"static",playvideoimageheight:64,navfonthighlightcolor:"#666666",showbackgroundimage:!1,navpreviewborder:4,navopacity:.8,shadowcolor:"#aaaaaa",navbuttonshowbgimage:!1,navbuttonbgimage:"navbuttonbgimage-28-28-0.png",textbgcss:"display:block; position:absolute; top:0px; left:0px; width:100%; height:100%; background-color:#fff; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; opacity:0.7; filter:alpha(opacity=70);",playvideoimagewidth:64,bottomshadowimagewidth:110,showtimer:!1,navradius:0,navshowpreview:!1,navmarginy:8,navmarginx:8,navfeaturedarrowimage:"featuredarrow-16-8-0.png",navfeaturedarrowimageheight:8,navstyle:"thumbnails",textpositionmarginleft:24,descriptioncss:"display:block; position:relative; font:14px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#333;",navplaypauseimage:"navplaypause-48-48-0.png",backgroundimagetop:-10,arrowstyle:"mouseover",timercolor:"#ffffff",numberingformat:"%NUM/%TOTAL ",navfontsize:12,navhighlightcolor:"#333333",navimage:"bullet-24-24-5.png",navheight:52,navshowplaypausestandaloneautohide:!0,navbuttoncolor:"",navshowarrow:!1,navshowfeaturedarrow:!1,titlecss:"display:block; position:relative; font: 16px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#000;",ribbonimagey:0,ribbonimagex:0,navshowplaypausestandaloneposition:"bottomright",shadowsize:0,arrowhideonmouseleave:1e3,navshowplaypausestandalonewidth:48,navshowplaypausestandaloneheight:48,backgroundimagewidth:120,navcolor:"#999999",navthumbtitlewidth:120,navpreviewposition:"top",arrowheight:32,arrowmargin:8,texteffectduration:1e3,bottomshadowimage:"bottomshadow-110-95-4.png",border:6,timerposition:"bottom",navfontcolor:"#333333",navthumbnavigationstyle:"arrow",borderradius:0,navbuttonhighlightcolor:"",textpositionstatic:"bottom",navthumbstyle:"imageonly",textcss:"display:block; padding:8px 16px; text-align:left; ",navbordercolor:"#ffffff",navpreviewarrowimage:"previewarrow-16-8-0.png",showbottomshadow:!1,navdirection:"horizontal",textpositionmarginstatic:0,backgroundimage:"",navposition:"bottom",navpreviewarrowwidth:16,bottomshadowimagetop:95,textpositiondynamic:"bottomleft",navshowbuttons:!1,navthumbtitlecss:"display:block;position:relative;padding:2px 4px;text-align:left;font:bold 14px Arial,Helvetica,sans-serif;color:#333;",textpositionmarginbottom:24,transition:""}),$("[class^=amazingslider-slider-]").hide(),$("[class^=amazingslider-nav-]").css("background-color","#f5f5f5"),$(".amazingslider-slider-0").show()})},0)}};return b}]),angular.module("directives.input",[]),angular.module("directives.input").directive("locAutocomplete",["appSettings",function(a){return{require:"ngModel",link:function(b,c,d,e){e.$formatters.push(function(a){return a?a.value:void 0});var f=function(a){e.$setViewValue({value:a.value,type:a.data.type})},g=function(){var e=b.$eval(d.autocomplete)||{};e.paramName="input",e.minChars=1,e.serviceUrl=a.apiServer+a.apiUri+"/place/autocomplete/json?types=geocode&language=fr&sensor=false&key=AIzaSyDhECsfYPYNNM7n-x-GuDTE3lwJlL5C_pw",e.onSelect=f,e.noCache=!0,e.formatResult=function(a){var b;switch(a.data.type){case"administrative_area_level_1":case"country":b="fa-flag";break;case"route":b="fa-road";break;case"locality":b="fa-building-o";break;case"around":b="fa-bullseye";break;default:b="fa-map-marker"}return'<i class="fa '+b+'"></i> '+a.value},e.transformResult=function(a){var b=$.map($.parseJSON(a).predictions,function(a){return{value:a.description,data:{reference:a.reference,type:a.types[0]}}});return b.push({value:"My Location",data:{type:"around"}}),{suggestions:b}},c.autocomplete(e)};b.$watch(d.locAutocomplete,g,!0)}}}]),angular.module("directives.input").directive("richTextEditor",function(){return{restrict:"A",require:"ngModel",transclude:!0,link:function(a,b,c,d){var e=b.wysihtml5({html:!1,stylesheets:["static/Spotly.css"]}),f=e.data("wysihtml5").editor;f.on("change",function(){f.getValue()&&a.$apply(function(){d.$setViewValue(f.getValue())})}),d.$render=function(){e.html(d.$viewValue),f.setValue(d.$viewValue)},d.$render()}}}),angular.module("directives.input").directive("tagAutocomplete",function(){return{require:"ngModel",link:function(a,b,c,d){d.$formatters.push(function(a){return a?a.value:void 0});var e=function(b){a.$apply(function(){d.$setViewValue({value:b.value,type:b.data})})},f=function(){var d=a.$eval(c.tagAutocomplete)||{};d.paramName="input",d.onSelect=e,d.transformResult=function(a){var b=$.map($.parseJSON(a.split("\n").slice(1).join("\n")),function(a){return{value:a.value,data:"tag"}});return b.push({value:"All Sports",data:"all"}),{suggestions:b}},b.autocomplete(d)};a.$watch(c.tagAutocomplete,f,!0)}}}),angular.module("directives.spotList",[]).constant("spotListConfig",{}).controller("SpotListController",["$scope","$attrs","spotListConfig",function(a){console.log("SpotListController - init"),this.spots=[],this.map={},this.scope=a,this.unselectOthers=function(a){angular.forEach(this.spots,function(b){b!==a&&(b.isSelected=!1)})},this.addSpot=function(a){var b=this;this.spots.push(a),a.$on("$destroy",function(){b.removeSpot(a)})},this.removeSpot=function(a){var b=this.spots.indexOf(a);-1!==b&&this.spots.splice(this.spots.indexOf(a),1)},this.addMap=function(a){var b=this;this.mapScope=a,a.$on("$destroy",function(){b.removeMap()})},this.removeMap=function(){this.map={}}}]).directive("spotList",function(){return{restrict:"EA",controller:"SpotListController",transclude:!0,replace:!1,template:'<div class="spots-list-container" ng-transclude></div>'}}).directive("spotItem",["$parse","Marker",function(a,b){return{require:"^spotList",restrict:"EA",transclude:!0,replace:!0,templateUrl:"directives/spotList/spot.tpl.html",scope:{spot:"@",index:"@",last:"@",onLike:"&",isSelected:"@"},link:function(c,d,e,f){var g,h;f.addSpot(c),c.isSelected=!1;var i;e.isSelected&&(g=a(e.isSelected),h=g.assign,f.scope.$watch(g,function(a){c.isSelected=!!a})),c.$watch("index",function(a){c.displayIndex=parseInt(a)+1}),c.$watch("spot",function(a){i=JSON.parse(a),c._id=i._id,c.title=i.title,c.likes=i.likes,c.tags=i.tags,c.description=i.description,c.loc=i.loc,c.address=i.address;var d=new b({id:c._id,latitude:c.loc[1],longitude:c.loc[0],title:c.title,draggable:!1,numberedIcon:!0,index:c.displayIndex,likes:c.likes.length});f.mapScope.spotMap.addMarker(d),"true"===c.last&&f.mapScope.spotMap.fitOnBounds()}),c.$watch("isSelected",function(a){a&&(f.unselectOthers(c),f.mapScope.spotMap.focusOnMarker(i._id,{zoom:!1})),h&&h(f.scope,a)}),c.$on("$destroy",function(){f.mapScope.spotMap.removeMarker(c._id)}),c.like=function(a){c.onLike(a)}}}}]).directive("map",["MapFactory","Marker","utilsService",function(a,b,c){return{require:"?^spotList",restrict:"E",template:'<div id="spotMap"></div>',transclude:!0,replace:!0,scope:{loc:"@",mode:"@",onMove:"&"},link:function(d,e,f,g){function h(a){var c=a.accuracy/2,e="You are within "+c+" meters from this point",f=new b({id:"geoPosition",latitude:a.latlng.lat,longitude:a.latlng.lng,title:e,draggable:!0,awesomeIcon:"icon-screenshot icon-large",color:"red",index:"0"});d.spotMap.map.addLayer(f.LMarker),d.spotMap.geoPosition.marker=f}function i(){}function j(a){for(var b=a.popup._source.options.id,d=0,e=g.spots.length;e>d;d++)if(g.spots[d]._id===b){g.spots[d].isSelected||(g.spots[d].isSelected=!0,g.scope.$digest());break}if(c.isElementInViewport($("#spot-"+b).get(0),{top:70}))$("#spots-main").offset({top:$("body").scrollTop()+70});else{var f=$("#spot-"+b).offset().top-70;$("html, body").animate({scrollTop:f},500,function(){$("#spots-main").offset({top:$("body").scrollTop()+70})})}}"undefined"!=typeof g&&g.addMap(d),d.$watch("loc",function(c){if(d.loc=c,c&&"{}"!==c){var e,f=JSON.parse(c);d.spotMap?(e=d.spotMap.map.getZoom(),d.spotMap.clear()):(d.spotMap=new a("spotMap",{onLocationFound:h,onLocationError:i,onPopupOpen:j,padding:[0,0,0,0]}),e=13);var g={id:0,latitude:f[1],longitude:f[0],numberedIcon:"edit"===d.mode?!1:!0,color:"blue",awesomeIcon:"edit"===d.mode?"arrows":" ",draggable:"edit"===d.mode?!0:!1},k=new b(g);k.LMarker.on("dragend",function(a){var b=a.target.getLatLng(),c=b.lat,e=b.lng;d.onMove({loc:[e,c]})}),d.spotMap.addMarker(k),d.spotMap.map.setView([f[1],f[0]],e)}}),d.$watch("mode",function(b){"explore"===b&&(d.spotMap=new a("spotMap",{onLocationFound:h,onLocationError:i,onPopupOpen:j,padding:[480,150,150,150]}),d.spotMap.map.setView([48.51,2.21],3))})}}}]).factory("MapFactory",["Marker","utilsService",function(a,b){return function(a,c){this.map_id=a,this.map=L.map(this.map_id,{scrollWheelZoom:!1,zoomControl:!1});var d=new L.Control.Zoom({position:"topright"});d.addTo(this.map),this.markers=new b.HashTable,this.bounds=[],this.geoPosition={};var e="http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",f='&copy; <a href="http://openstreetmap.org/copyright">OpenStreetMap</a> contributors',g=L.tileLayer(e,{maxZoom:18,attribution:f,timeout:3e6});g.addTo(this.map),c.onLocationError&&this.map.on("locationerror",c.onLocationError),c.onLocationFound&&this.map.on("locationfound",c.onLocationFound),c.onPopupOpen&&this.map.on("popupopen",c.onPopupOpen),this.padding=c.padding?c.padding:[480,150,150,150],this.geoLocate=function(){this.map.locate({setView:!0,maxZoom:18})},this.centerOnGeoPosition=function(){this.map.panTo([this.geoPosition.marker.LMarker._latlng.lat,this.geoPosition.marker.LMarker._latlng.lng])},this.moveGeoMarker=function(a){this.geoPosition.marker.LMarker._latlng.lat=a.lat,this.geoPosition.marker.LMarker._latlng.lng=a.lng,this.geoPosition.marker.LMarker.update(),this.centerOnGeoPosition()},this.removeGeoMarker=function(){this.map.removeLayer(this.geoPosition.marker.LMarker),this.geoPosition={}},this.fitOnBounds=function(){this.bounds.length&&this.map.fitBounds(this.bounds,{paddingTopLeft:[this.padding[0],this.padding[1]],paddingBottomRight:[this.padding[2],this.padding[3]]})},this.focusOnMarker=function(a){var b=this.markers.getItem(a).LMarker;b.openPopup()},this.closePopup=function(a){if(a){var b=this.markers.getItem(a).LMarker;b.closePopup()}},this.displayMap=function(a){"undefined"==typeof a?this.map.setView([this.geoPosition.coords.latitude,this.geoPosition.coords.longitude],10):this.map.setView([a.coords.latitude,a.coords.longitude],10)},this.addMarker=function(a){var b=this.markers.getItem(a.id);"undefined"==typeof b&&(this.map.addLayer(a.LMarker),this.markers.setItem(a.id,a),this.bounds.push(a.LMarker._latlng))},this.clear=function(){for(var a in this.markers.items)this.markers.hasItem(a)&&(this.map.removeLayer(this.markers.items[a].LMarker),this.markers.removeItem(a));this.bounds=[]},this.removeMarker=function(a){var b=this.markers.getItem(a),c=this.bounds.indexOf(b.LMarker._latlng);this.map.removeLayer(b.LMarker),this.markers.removeItem(a),this.bounds.splice(c,1)}}}]).factory("Marker",["$templateCache",function(a){return function(b){var c={};if(this.id=b.id,b.draggable&&(c.draggable=!0),b.id&&(c.id=b.id),b.awesomeIcon&&b.color){var d=L.AwesomeMarkers.icon({prefix:"fa",icon:b.awesomeIcon,markerColor:b.color});c.icon=d}if(b.numberedIcon&&(numberedIcon=new L.NumberedDivIcon({number:b.index}),c.icon=numberedIcon),this.latitude=b.latitude,this.longitude=b.longitude,this.LMarker=L.marker([this.latitude,this.longitude],c),b.title){var e=a.get("directives/spotList/spot.popup.tpl.html").replace("{{spot.title}}",b.title).replace("{{spot._id}}",b.id).replace("{{spot.index}}",b.index);this.LMarker.bindPopup(e,{minWidth:"400px"})}}}]),L.NumberedDivIcon=L.Icon.extend({options:{iconUrl:"static/img/marker-icon.png",number:"",shadowUrl:null,iconSize:new L.Point(25,41),iconAnchor:new L.Point(13,41),popupAnchor:new L.Point(0,-33),className:"leaflet-div-numbered-icon"},createIcon:function(){var a=document.createElement("div"),b=this._createImg(this.options.iconUrl),c=document.createElement("div");return c.setAttribute("class","number"),c.innerHTML=this.options.number||"",a.appendChild(b),a.appendChild(c),this._setIconStyles(a,"icon"),a},createShadow:function(){return null}}),angular.module("I18N",[]).constant("I18N.MESSAGES",{"login.error.invalidCredentials":"Login failed.  Please check your credentials and try again.","login.error.serverError":"There was a problem with authenticating: {{exception}}.","spot.data.update.success":"Spot data successfully updated","errors.route.changeError":"Route change error","crud.user.remove.success":"A user with id '{{id}}' was removed successfully."}),angular.module("security.authorization",["security.service"]).provider("securityAuthorization",{requireAdminUser:["securityAuthorization",function(a){return a.requireAdminUser()}],requireAuthenticatedUser:["securityAuthorization",function(a){return a.requireAuthenticatedUser()}],$get:["security","securityRetryQueue",function(a,b){var c={requireAuthenticatedUser:function(){var d=a.requestCurrentUser().then(function(){return a.isAuthenticated()?void 0:b.pushRetryFn("unauthenticated-client",c.requireAuthenticatedUser)});return d},requireAdminUser:function(){var d=a.requestCurrentUser().then(function(){return a.isAdmin()?void 0:b.pushRetryFn("unauthorized-client",c.requireAdminUser)});return d}};return c}]}),angular.module("security",["security.service","security.interceptor","security.login","security.authorization"]),angular.module("security.interceptor",["security.retryQueue"]).factory("securityInterceptor",["$injector","securityRetryQueue",function(a,b){return function(c){return c.then(null,function(d){return 401===d.status&&(c=b.pushRetryFn("unauthorized-server",function(){return a.get("$http")(d.config)})),c})}}]).config(["$httpProvider",function(a){a.responseInterceptors.push("securityInterceptor")}]),angular.module("security.login.form",[]).controller("LoginFormController",["$scope","$modal","security","localizedMessages",function(a,b,c,d){a.authError=null,a.authReason=null,c.getLoginReason()&&(a.authReason=c.isAuthenticated()?"login.reason.notAuthorized":"login.reason.notAuthenticated"),a.login=function(){a.authError=null,c.login($('[name="username"]').val(),$('[name="password"]').val()).then(function(b){b||(a.authError=d.get("login.error.invalidCredentials"))},function(b){a.authError="login.error.serverError: "+b})},a.clearForm=function(){a.user={}},a.cancelLogin=function(){c.cancelLogin()}}]),angular.module("security.login",["security.login.form","security.login.toolbar"]),angular.module("security.login.toolbar",[]).directive("loginToolbar",["security",function(a){var b={templateUrl:"security/login/toolbar.tpl.html",restrict:"E",replace:!0,scope:!0,link:function(b){b.isAuthenticated=a.isAuthenticated,b.login=a.showLogin,b.logout=a.logout}};return b}]),angular.module("security.retryQueue",[]).factory("securityRetryQueue",["$q","$log",function(a,b){var c=[],d={onItemAddedCallbacks:[],hasMore:function(){return c.length>0},push:function(a){c.push(a),angular.forEach(d.onItemAddedCallbacks,function(c){try{c(a)}catch(d){b.error("securityRetryQueue.push(retryItem): callback threw an error"+d)}})},pushRetryFn:function(b,c){1===arguments.length&&(c=b,b=void 0);var e=a.defer(),f={reason:b,retry:function(){a.when(c()).then(function(a){e.resolve(a)},function(a){e.reject(a)})},cancel:function(){e.reject()}};return d.push(f),e.promise},retryReason:function(){return d.hasMore()&&c[0].reason},cancelAll:function(){for(;d.hasMore();)c.shift().cancel()},retryAll:function(){for(;d.hasMore();)c.shift().retry()}};return d}]),angular.module("security.service",["security.retryQueue","security.login","ui.bootstrap.modal"]).factory("security",["$http","$q","$location","securityRetryQueue","$modal",function(a,b,c,d,e){function f(a){a=a||"/",c.path(a)}function g(){if(j)throw new Error("Trying to open a dialog that is already open!");j=e.open({templateUrl:"security/login/form.tpl.html",controller:"LoginFormController",resolve:{user:function(){return i}}}),j.result.then(function(a){j=null,a?d.retryAll():(d.cancelAll(),f())},function(){j=null,console.log("Dialog dismissed"),d.cancelAll()})}function h(a){j&&j.close(a)}var i={username:"name",password:null},j=null;d.onItemAddedCallbacks.push(function(){d.hasMore()&&k.showLogin()});var k={getLoginReason:function(){return d.retryReason()},showLogin:function(){g()},login:function(b,c){var d=a.post("/login",{username:b,password:c});return d.then(function(a){return k.currentUser=a.data.user,k.isAuthenticated()&&h(!0),k.isAuthenticated()})},cancelLogin:function(){h(!1),f()},logout:function(b){a.post("/logout").then(function(){k.currentUser=null,f(b)})},requestCurrentUser:function(){return k.isAuthenticated()?b.when(k.currentUser):a.get("/current-user").then(function(a){return k.currentUser=a.data.user,k.currentUser})},currentUser:null,isAuthenticated:function(){return!!k.currentUser},isAdmin:function(){return!(!k.currentUser||!k.currentUser.admin)}};return k}]),function(){var a=angular.module("angularFileUpload",[]);a.service("$upload",["$http","$rootScope","$timeout",function(a,b,c){function d(b){b.method=b.method||"POST",b.headers=b.headers||{},b.transformRequest=b.transformRequest||function(b){return window.ArrayBuffer&&b instanceof ArrayBuffer?b:a.defaults.transformRequest[0](b)},window.XMLHttpRequest.__isShim&&(b.headers.__setXHR_=function(){return function(a){b.__XHR=a,a.upload.addEventListener("progress",function(a){b.progress&&c(function(){b.progress(a)})},!1),a.upload.addEventListener("load",function(a){a.lengthComputable&&c(function(){b.progress(a)})},!1)}});var d=a(b);return d.progress=function(a){return b.progress=a,d},d.abort=function(){return b.__XHR&&c(function(){b.__XHR.abort()}),d},d.then=function(a,c){return function(d,e,f){return b.progress=f||b.progress,c.apply(a,[d,e,f]),a}}(d,d.then),d}this.upload=function(b){b.headers=b.headers||{},b.headers["Content-Type"]=void 0,b.transformRequest=b.transformRequest||a.defaults.transformRequest;var c=new FormData;if(b.data)for(var e in b.data){var f=b.data[e];if(b.formDataAppender)b.formDataAppender(c,e,f);else{if("function"==typeof b.transformRequest)f=b.transformRequest(f);else for(var g=0;g<b.transformRequest.length;g++){var h=b.transformRequest[g];"function"==typeof h&&(f=h(f))}c.append(e,f)}}b.transformRequest=angular.identity;var i=b.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(b.file))for(var j="[object String]"===Object.prototype.toString.call(i),k=0;k<b.file.length;k++)c.append(j?i+k:i[k],b.file[k],b.file[k].name);else c.append(i,b.file,b.file.name);return b.data=c,d(b)},this.http=function(a){return d(a)}}]),a.directive("ngFileSelect",["$parse","$http","$timeout",function(a,b,c){return function(b,d,e){var f=a(e.ngFileSelect);d.bind("change",function(a){var d,e,g=[];if(d=a.target.files,null!=d)for(e=0;e<d.length;e++)g.push(d.item(e));c(function(){f(b,{$files:g,$event:a})})}),d.bind("click",function(){this.value=null})}}]),a.directive("ngFileDropAvailable",["$parse","$http","$timeout",function(a,b,c){return function(b,d,e){if("draggable"in document.createElement("span")){var f=a(e.ngFileDropAvailable);c(function(){f(b)})}}}]),a.directive("ngFileDrop",["$parse","$http","$timeout",function(a,b,c){return function(b,d,e){if("draggable"in document.createElement("span")){var f=a(e.ngFileDrop);d[0].addEventListener("dragover",function(a){a.stopPropagation(),a.preventDefault(),d.addClass(e.ngFileDragOverClass||"dragover")},!1),d[0].addEventListener("dragleave",function(){d.removeClass(e.ngFileDragOverClass||"dragover")},!1),d[0].addEventListener("drop",function(a){a.stopPropagation(),a.preventDefault(),d.removeClass(e.ngFileDragOverClass||"dragover");
var g,h=[],i=a.dataTransfer.files;if(null!=i)for(g=0;g<i.length;g++)h.push(i.item(g));c(function(){f(b,{$files:h,$event:a})})},!1)}}}])}(),app.service("commentsService",["$http","appSettings",function(a,b){this.getComment=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/comment/"+c}).then(function(a){return a.data})},this.getComments=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/comments/"+c}).then(function(a){return a.data})}}]),angular.module("services.httpRequestTracker",[]),angular.module("services.httpRequestTracker").factory("httpRequestTracker",["$http",function(a){var b={};return b.hasPendingRequests=function(){return a.pendingRequests.length>0},b}]),angular.module("services.i18nNotifications",["services.notifications","services.localizedMessages"]),angular.module("services.i18nNotifications").factory("i18nNotifications",["localizedMessages","notifications",function(a,b){var c=function(b,c,d,e){return angular.extend({message:a.get(b,d),type:c},e)},d={pushSticky:function(a,d,e,f){return b.pushSticky(c(a,d,e,f))},pushForCurrentRoute:function(a,d,e,f){return b.pushForCurrentRoute(c(a,d,e,f))},pushForNextRoute:function(a,d,e,f){return b.pushForNextRoute(c(a,d,e,f))},getCurrent:function(){return b.getCurrent()},remove:function(a){return b.remove(a)}};return d}]),angular.module("services.localizedMessages",[]).factory("localizedMessages",["$interpolate","I18N.MESSAGES",function(a,b){var c=function(a,b){return a||"?"+b+"?"};return{get:function(d,e){var f=b[d];return f?a(f)(e):c(f,d)}}}]),angular.module("services.notifications",[]).factory("notifications",["$rootScope",function(a){var b={STICKY:[],ROUTE_CURRENT:[],ROUTE_NEXT:[]},c={},d=function(a,b){if(!angular.isObject(b))throw new Error("Only object can be added to the notification service");return a.push(b),b};return a.$on("$locationChangeSuccess",function(){b.ROUTE_CURRENT.length=0,b.ROUTE_CURRENT=angular.copy(b.ROUTE_NEXT),b.ROUTE_NEXT.length=0}),c.getCurrent=function(){return[].concat(b.STICKY,b.ROUTE_CURRENT)},c.pushSticky=function(a){return d(b.STICKY,a)},c.pushForCurrentRoute=function(a){return d(b.ROUTE_CURRENT,a)},c.pushForNextRoute=function(a){return d(b.ROUTE_NEXT,a)},c.remove=function(a){angular.forEach(b,function(b){var c=b.indexOf(a);c>-1&&b.splice(c,1)})},c.removeAll=function(){angular.forEach(b,function(a){a.length=0})},c}]),app.service("spotsService",["$http","appSettings",function(a,b){this.getSpot=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/spots/"+c}).then(function(a){return a.data})},this.searchSpots=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/spots/"+c.k+"/"+c.lng+"/"+c.lat}).then(function(a){return a.data})},this.updateSpot=function(c){var d=jQuery.extend({},c),e=d._id;return delete d._id,a({method:"PUT",url:b.apiServer+b.apiUri+"/spots/"+e,data:d}).then(function(a){return a.data})},this.getComments=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/spots/"+c+"/comments"}).then(function(a){return a.data})},this.getTopo=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/spots/"+c+"/topo"}).then(function(a){return a.data})},this.getData=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/spots/"+c+"/data"}).then(function(a){return a.data})},this.updateData=function(c){var d=jQuery.extend({},c),e=d._id;return delete d._id,a({method:"PUT",url:b.apiServer+b.apiUri+"/datas/"+e,data:d}).then(function(){})},this.updateTopo=function(c){var d=jQuery.extend({},c),e=d._id;return delete d._id,a({method:"PUT",url:b.apiServer+b.apiUri+"/topos/"+e,data:d}).then(function(){})},this.insertComment=function(c){return a({method:"POST",url:b.apiServer+b.apiUri+"/comments",data:c}).then(function(a){return a.data})}}]),app.service("commentsService",["$http","appSettings",function(a,b){this.getTopo=function(c){return a({method:"GET",url:b.apiServer+b.apiUri+"/comment/"+c}).then(function(a){return a.data})}}]),app.service("utilsService",function(){this.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0,c="x"===a?b:3&b|8;return c.toString(16)})},this.getQueryStringParams=function(a){var b=a||window.location.search||"",c=[],d={};if(b=b.replace(/.*?\?/,"").split("#/")[0],b.length){c=b.split("&");for(var e in c){var f=c[e].split("=")[0];f.length&&("undefined"==typeof d[f]&&(d[f]=[]),d[f].push(c[e].split("=")[1]))}}return d},this.isElementInViewport=function(a,b){var c=a.getBoundingClientRect();return c.top>=b.top?c.bottom>(window.innerHeight||document.documentElement.clientHeight)?!1:!0:!1},this.HashTable=function(a){this.length=0,this.items={};for(var b in a)a.hasOwnProperty(b)&&(this.items[b]=a[b],this.length++);this.setItem=function(a,b){var c;return this.hasItem(a)?c=this.items[a]:this.length++,this.items[a]=b,c},this.getItem=function(a){return this.hasItem(a)?this.items[a]:void 0},this.hasItem=function(a){return this.items.hasOwnProperty(a)},this.removeItem=function(a){return this.hasItem(a)?(previous=this.items[a],this.length--,delete this.items[a],previous):void 0},this.keys=function(){var a=[];for(var b in this.items)this.hasItem(b)&&a.push(b);return a},this.values=function(){var a=[];for(var b in this.items)this.hasItem(b)&&a.push(this.items[b]);return a},this.each=function(a){for(var b in this.items)this.hasItem(b)&&a(b,this.items[b])},this.clear=function(){this.items={},this.length=0}}}),angular.module("templates.app",["activity/activity.tpl.html","explore/explore.tpl.html","home/home.tpl.html","navbar/navbar.tpl.html","notifications/notifications.tpl.html","spot/comment/comment.edit.tpl.html","spot/comment/comment.tpl.html","spot/data/data.edit.tpl.html","spot/data/data.tpl.html","spot/header/header.edit.tpl.html","spot/header/header.tpl.html","spot/spot.edit.tpl.html","spot/spot.new.tpl.html","spot/spot.tpl.html","spot/topo/topo.edit.tpl.html","spot/topo/topo.tpl.html","user/user.tpl.html"]),angular.module("activity/activity.tpl.html",[]).run(["$templateCache",function(a){a.put("activity/activity.tpl.html",'<div class="container">\n	<div class="panel panel-default">\n		<!-- PANEL HEADING -->\n		<div class="panel-heading">\n\n		</div>\n\n		<!-- PANEL BODY -->\n		<div class="panel-body">\n		</div>\n	</div>\n</div>')}]),angular.module("explore/explore.tpl.html",[]).run(["$templateCache",function(a){a.put("explore/explore.tpl.html",'<div style="margin-bottom:70px">\n  <div id="spots-left-bar">\n\n    <div class="panel panel-default" style="margin-bottom:0px">\n      <div class="panel-body">\n\n        <div class="pull-right">\n          <a style="width:45px;" ng-click="openModal()" class="btn btn-default btn-lg"><i class="fa fa-link"></i></a>\n          <a style="display:none"  class="btn btn-default btn-lg" ng-click="explore()"><i style="font-size:1em;" class="fa fa-arrow-right"></i></a>\n        </div>\n        <span >\n          <h1 id="map-title" class="">Explore</h1>\n          <p>Results for <b>{{k.value}}</b> around <b>{{l.value}}</b> </p>\n        </span>\n      </div>\n    </div>\n\n\n    <div spot-list>\n      <map style="position:fixed;right:0;left:0;top:51px;bottom:0;z-index:-1" mode="explore" location="{{location}}" onPopupOpen="onPopupOpen"></map> \n      <div data-ng-repeat="spot in spots" spot-item spot="{{spot}}" index="{{$index}}" last="{{$last}}" on-like="like($index)" is-selected="{{spot.isSelected}}"></div>\n    </div>\n  </div>\n</div>\n\n<!-- <script type="text/ng-template" id="myModalContent.html">\n    <div class="modal-header">\n        <h3>I\'m a modal!</h3>\n    </div>\n    <div class="modal-body">\n        <ul>\n           CHAT\n        </ul>\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="ok()">OK</button>\n        <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n    </div>\n</script> -->')}]),angular.module("home/home.tpl.html",[]).run(["$templateCache",function(a){a.put("home/home.tpl.html",'<div style="background:white">\n	<section class="home-slider-top">\n		<div class="container">\n			<div class="row">\n				<div class="col-lg-12">\n					<div class="home-slider-top-text">\n						<h1><i class="fa fa-map-marker"></i> Spotly</h1>\n						<h3 style="font-family: \'Norican\', cursive;font-size:3em">Find places to enjoy your favorite sports</h3>\n					</div>\n\n					<form role="explore" class="" id="home-explore-form" novalidate>\n						<div class="form-group pull-left" style="width:303px;margin-left:15px;">\n							<div class="input-group">\n								<span class="input-group-addon input-lg"><i class="fa fa-map-marker"></i></span>\n								<input tag-autocomplete="{{tagsAutocompleteOptions}}" id="k" type="text" name="k" ng-model="search.k" class="form-control input-lg" placeholder="Search" autofocus>\n							</div>\n						</div>\n						<div class="search-location form-group pull-left" style="width:303px;margin-left:15px;">\n							<div class="input-group">\n								<span class="input-group-addon input-lg"><i class="fa fa-location-arrow"></i></span>\n								<input loc-autocomplete type="text" name="l" id="l" ng-model="search.l" class="form-control input-lg"  placeholder="Around">\n							</div>\n						</div>\n						<button id="search-button" ng-click="explore()" class="btn btn-success btn-lg" style="margin-left:15px;"> <i class="fa fa-search fa fa-white"></i> <b>FIND SPOTS</b></button>\n					</form>\n				</div>\n\n			</div>\n		\n		</div>\n	</section><!-- \n	<section id="explore">\n		<div class="container">\n			<div class="row">\n				<div class="content-head">\n					<h2>What can I do ?</h2>\n					<div class="line"></div>\n				</div>\n				<div class="col-lg-2 services-info">\n					<img src="/img/980-riding.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/1010-surf.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			\n				<div class="col-lg-2 services-info">\n					<img src="/img/1013-rock-climbing.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/1019-bmx.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/1025-runner.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/1038-diving.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			</div>\n\n			<br/>\n\n			<div class="row">\n\n			\n				<div class="col-lg-2 services-info">\n					<img src="/img/1812-snowboard.jpg" class="img-thumbnail" style="border:0">\n				</div>\n				\n				<div class="col-lg-2 services-info">\n					<img src="/img/2540-windsurf.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/2554-race-car.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/3656-canoe-kayak.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			\n				<div class="col-lg-2 services-info">\n					<img src="/img/2554-race-car.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/3656-canoe-kayak.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			\n			</div>\n\n			<br/>\n\n			<div class="row">\n				\n				<div class="col-lg-2 services-info">\n					<img src="/img/5339-yoga.jpg" class="img-thumbnail" style="border:0">\n				</div>\n				\n				<div class="col-lg-2 services-info">\n					<img src="/img/5400-backpacker.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/5421-rafting.jpg" class="img-thumbnail" style="border:0">\n				</div>\n				\n				<div class="col-lg-2 services-info">\n					<img src="/img/980-riding.jpg" class="img-thumbnail" style="border:0">\n				</div>\n\n				<div class="col-lg-2 services-info">\n					<img src="/img/1010-surf.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			\n				<div class="col-lg-2 services-info">\n					<img src="/img/1013-rock-climbing.jpg" class="img-thumbnail" style="border:0">\n				</div>\n			</div>\n		</div>\n	</section> -->\n	<section id="services">\n			\n		<div class="container">\n			<div class="row">\n				<div class="content-head">\n					<h2>What can I do ?</h2>\n					<div class="line"></div>\n				</div>\n				<div class="col-lg-4 services-info">\n					<div class="ico">\n						<span class="fa fa-stack fa fa-5x">\n							<i class="shadow fa fa-circle fa fa-muted fa fa-stack-base"></i>\n							<i class="fa fa-map-marker"></i>\n						</span>\n					</div>\n					<div class="desc">\n						<h4>Spot places</h4>\n						<p>Share sport-related points of interest.</p>\n					</div>\n				</div>\n\n				<div class="col-lg-4 services-info">\n					<div class="ico">\n						<span class="fa fa-stack fa fa-5x">\n							<i class="shadow fa fa-circle fa fa-muted fa fa-stack-base"></i>\n							<i class="fa fa-search"></i>\n						</span>	\n					</div>\n					<div class="desc">\n						<h4>Find any spots around</h4>\n						<p>Find sporting activities around you.</p>\n					</div>\n				</div>\n			\n				<div class="col-lg-4 services-info">\n					<div class="ico">\n						<span class="fa fa-stack fa fa-5x">\n							<i class="shadow fa fa-circle fa fa-muted fa fa-stack-base"></i>\n							<i class="fa fa-comments"></i>\n						</span>\n					</div>\n					<div class="desc">\n						<h4>Grow a community</h4>\n						<p>Meet and exchange with people that share your passion</p>\n					</div>\n				</div>\n			</div>\n		</div>\n	</section>\n\n	<section id="get-started">\n		<div class="container">\n			<div class="row">\n				<div class="content-head">\n					<h2>Let\'s get started</h2>\n					<div class="line"></div>\n				</div>\n				<div class="col-lg-4 col-lg-offset-4">\n					<a href="#" class="btn btn-success btn-lg" style="width:100%">Find sports spots around my location</a>\n				</div>\n			</div>\n		</div>\n	</section>\n</div>\n\n<footer>\n	<div class="footer">\n		<p>Â© 2013. <a href="#">Spotly.</a> All rights reserved.</p>\n	</div>\n</footer>\n\n<script>\n$(document).ready(function(){\n	/*$(\'#main-slider\').flexslider({\n		animation: "fade",\n		slideshowSpeed: 7000\n	});*/\n\n	//locationAutocomplete($(\'#l\'));\n	//tagAutocomplete($(\'#k\'));\n'+"	var hp = ['hp1.jpg','hp2.jpg'];\n	$('.home-slider-top').css('background-image','url(../static/img/'+hp[Math.floor(Math.random() * hp.length)]+')');\n	$('.home-slider-top').css('background-position','center');\n	$('.home-slider-top').css('background-repeat','no-repeat');\n\n});\n</script>")}]),angular.module("navbar/navbar.tpl.html",[]).run(["$templateCache",function(a){a.put("navbar/navbar.tpl.html",'<nav class="navbar navbar-default" ng-class="{\'navbar-fixed-top\':fixed, \'navbar-unfixed-top\':!fixed}" role="navigation" style="min-width:970px">\n    <div class="navbar-header">\n       <!-- APP TITLE -->\n       \n        <a class="navbar-brand" ui-sref="home" style="font-family: \'Grand Hotel\', cursive;font-size:2em;padding:13px 15px">\n            <i ng-show="hasPendingRequests()" class="fa fa-spinner fa-spin fa-fw"></i>\n            <i ng-show="!hasPendingRequests()" class="fa fa-map-marker fa-fw"></i> Spotly</a>\n        </a>\n    </div>\n\n    <div class="collapse navbar-collapse navbar-ex1-collapse">\n        <div ng-if="search">\n            <form class="navbar-form navbar-left" style="float:left;margin-bottom:0px;margin-top:10px;" role="explore" ng-controller="ExploreFormController">\n                <div id="nav-search-spot" class="form-group" style="margin-bottom:0px;float:left;width:303px;margin-right:10px">\n                    <div class="input-group">\n                        <span class="input-group-addon" style="height:34px;line-height:1.428571429;font-size:14px;"><i class="fa fa-map-marker"></i></span>\n                        <input type="text" tag-autocomplete="{{tagsAutocompleteOptions}}" class="form-control" style="height:34px;line-height:1.428571429;font-size:14px;" id="k" name="k" ng-model="k" placeholder="Search"/>\n                    </div>\n                </div>\n                <div id="nav-search-location" class="form-group" style="margin-bottom:0px;float:left;width:303px;margin-right:10px">\n                    <div class="input-group">\n                        <span class="input-group-addon" style="height:34px;line-height:1.428571429;font-size:14px;"><i class="fa fa-location-arrow"></i></span>\n                        <input type="text" loc-autocomplete class="form-control" style="height:34px;line-height:1.428571429;font-size:14px;" id="l" name="l" placeholder="Around" ng-model="l" />\n                    </div>\n                </div>\n                <button id="nav-search-button" ng-click="explore()" type="submit" class="btn btn-primary" style="height:34px;line-height:1.428571429;font-size:14px;"> <i class="fa fa-search fa fa-white"></i></input>\n            </form>\n        </div>\n        \n            <login-toolbar></login-toolbar>\n    </div>\n</nav>\n')}]),angular.module("notifications/notifications.tpl.html",[]).run(["$templateCache",function(a){a.put("notifications/notifications.tpl.html",'<div ng-class="[\'alert\', \'alert-\'+notification.type]" ng-repeat="notification in notifications.getCurrent()">\n    <button class="close" ng-click="removeNotification(notification)">x</button>\n    {{notification.message}}\n</div>')}]),angular.module("spot/comment/comment.edit.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/comment/comment.edit.tpl.html",'<div style="overflow:auto;margin-bottom:15px" id="comment-new">\n	<a class="pull-left" href="#">\n		<img src="static/img/avatar_default.jpg" class="img-rounded media-object story-avatar">\n	</a>\n	<div style="width:83%; margin-left:100px">\n		<form role="form" ng-submit="insertComment()">\n			<div class="row">\n				<div class="col-lg-12">\n					<div class="form-group">\n						<label for="comment.title" class="sr-only">Title</label>\n						<input type="text" id="comment.title" placeholder="Title" data-ng-model="comment.title" class="form-control" autofocus="autofocus">\n					</div>\n					<div class="form-group">\n						<label for="comment.body" class="sr-only">Type your story here</label>\n						<textarea rows="4" id="comment.body" placeholder="Type your story here" data-ng-model="comment.body" class="form-control"></textarea>\n					</div>\n					<div class="form-group">\n						<label for="comment.pictures" class="sr-only">Photos</label>\n						<div ng-file-drop="onFileSelect($files)" ng-file-drag-over-class="dragover" ng-show="dropSupported" class="drop-box">\n							<h4><i class="fa fa-camera fa fa-2x" style="color:#aaa"></i></h4>\n							<h4 style="color:#aaa">Drop your photos here</h4>\n						</div>\n						<div ng-file-drop-available="dropSupported=true" ng-show="!dropSupported">HTML5 Drop File is not supported!</div>\n					</div>\n					<div ng-repeat="upload in uploads" class="form-group">\n						<div class="upload-progress panel panel-default panel-body">\n							<div class="col-lg-7" style="padding-left:0"><b>{{upload.name}} - {{upload.progress}}</b></div>\n							<div class="progress col-lg-4" style="margin-bottom:0;padding:0">\n								<div class="progress-bar" role="progressbar" aria-valuenow="{{upload.progress}}" aria-valuemin="0" aria-valuemax="100" style="width:{{upload.progress}}%">\n									<span class="sr-only">{{upload.progress}}% Complete</span>\n								</div>\n							</div>\n							<div class="pull-right"><i class="fa fa-remove"></i></div>\n						</div>\n					</div>\n					<div class="form-group">\n						<button data-ng-disabled="!enableAddStory()" class="btn btn-success">Add Story</button>\n					</div>\n				</div>\n			</div>\n		</form>\n	</div>\n</div>\n<script>\n	var offset = $("#comment-new").offset().top - 70;\n	$(\'html, body\').animate({   \n	  scrollTop: offset\n	}, 500);\n</script>')}]),angular.module("spot/comment/comment.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/comment/comment.tpl.html",'<div style="overflow:auto;margin-bottom:15px" ng-controller="CommentController">\n	<a class="pull-left" href="#">\n		<img src="static/img/avatar_default.jpg" class="img-rounded media-object story-avatar">\n	</a>\n	<div class="timeline-panel">\n		<div class="timeline-heading">\n			<h4 class="timeline-title">{{comment.title}}</h4>\n			<p><small class="text-muted"><i class="fa fa-time"></i> {{comment.creationDate}}</small></p>\n		</div>\n		<div class="timeline-body">\n			<p>{{comment.body}}</p>\n			<div style="display:block;position:relative;margin: 10px -20px 0; padding-left:-20px; background-color:#f5f5f5;height:65px;" ng-show="atLeastOnePicture()">\n				<div style="" id="story-carousel-{{comment._id}}" class="story-carousel">\n					<ul class="amazingslider-slides" style="display:none;">\n						<li data-ng-repeat="picture in comment.pictures">\n							<img ng-src="/uploads/{{picture.url}}"/>\n						</li>\n					</ul>\n					<ul class="amazingslider-thumbnails" style="display:none;">\n						<li data-ng-repeat="picture in comment.pictures">\n							<img ng-src="/uploads/{{picture.url}}"/>\n						</li>\n						<div display-slider slider-id="story-carousel-{{comment._id}}"></div>\n					</ul>\n				</div>\n			</div>\n			<div style="display:block;position:relative;margin: 10px -20px 0; padding-left:-20px; background-color:#f5f5f5;height:10px;" ng-show="!atLeastOnePicture()">\n		</div>\n	</div>\n</div>\n')}]),angular.module("spot/data/data.edit.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/data/data.edit.tpl.html",'<table class="table table-striped table-bordered" style="margin-bottom:0">\n	<tbody>\n		<tr ng-repeat="data in data.table">\n			<td>\n				<input type="text" ng-model="data.key" class="form-control input-sm" style="width:29%;float:left;margin-right:6px;display:inline-block;"></input>\n				<!-- if != stars -->\n				<input ng-if="data.type != \'stars\'" type="text" ng-model="data.value" class="form-control input-sm" style="width:28%;text-align:right;float:left;margin-right:6px;display:inline-block;"></input>\n				<!-- if == stars -->\n				<rating ng-if="data.type == \'stars\'" value="data.value" max="max" readonly="isReadonly" on-hover="hoveringOver(value)" rating-states="ratingStates" on-leave="overStar = null" style="margin-right:6px;float:left;padding-top:6px;padding-left:6px;font-size:1.2em"></rating>\n				\n				<div style="float:right">\n					<div class="btn-group">\n						<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">\n							<i class="fa fa-bars"></i>\n						</button>\n						<ul class="dropdown-menu pull-right" role="menu">\n							<li><a href ng-click="removeData($index)"><i class="fa fa-trash-o"></i> Remove data</a></li>\n						</ul>\n					</div>\n				</div>\n				<div class="btn-group" style="float:right;margin-right:6px">\n					<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" style="width:54px">\n						{{data.type}}\n					</button>\n					<ul class="dropdown-menu pull-right" role="menu">\n						<li><a href ng-click="changeType($index,\'km\')">Kilometer (km)</a></li>\n						<li><a href ng-click="changeType($index,\'m\')">Meter (m)</a></li>\n						<li><a href ng-click="changeType($index,\'day\')">Day</a></li>\n						<li><a href ng-click="changeType($index,\'h\')">Hour (h)</a></li>\n						<li><a href ng-click="changeType($index,\'min\')">Minute (min)</a></li>\n						<li><a href ng-click="changeType($index,\'stars\')"><i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> <i class="fa fa-star"></i> (stars)</a></li>\n					</ul>\n				</div>\n			</td>\n		</tr>\n		<tr>\n			<td style="text-align:center"><a href ng-click="addData()">Add new data</a></td>\n		</tr>\n	</tbody>\n</table>')}]),angular.module("spot/data/data.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/data/data.tpl.html",'<!-- DATA -->\n<div class="panel panel-default" id="data">\n	<ul class="nav nav-tabs header-tabs">\n		<li><a href="#data-tab" data-toggle="tab2"><b>Data</b></a></li>\n	</ul>\n	<div data-ui-view="data.main" autoscroll="false">\n		<div class="row">\n			<div class="col-lg-12">\n				<table class="table table-striped table-bordered" style="margin-bottom:0">\n					<tbody>\n						<tr ng-repeat="data in data.table">\n							<td ng-if="data.type != \'stars\'">{{data.key}} <span class="pull-right"><b>{{data.value}} {{data.type}}</b></span></td>\n							<td ng-if="data.type == \'stars\'">{{data.key}} \n								<span class="pull-right">\n									<rating value="data.value" max="max" readonly="true" on-hover="hoveringOver(value)" rating-states="ratingStates" on-leave="overStar = null" style="margin-left:8px;font-size:1.2em"></rating>\n								</span>\n							</td>\n						</tr>\n					</tbody>\n				</table>\n			</div>\n		</div>\n	</div>\n</div>\n<script>\n$(document).ready(function(){\n\n	$(\'.header-tabs a\').click(function (e) {\n		e.preventDefault();\n		$(this).tab(\'show\');\n	})\n	$(\'.header-tabs\').each(function(){\n'+"		$(this).find('a:first').tab('show');\n	});\n});\n</script>")}]),angular.module("spot/header/header.edit.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/header/header.edit.tpl.html",'<div class="form-group">\n	<strong><input class="form-control input-lg" ng-model="spot.title" placeholder="Spot Title"></input></strong>\n</div>\n<input loc-autocomplete class="form-control" ng-model="spot.address" ng-change="updateMarker()" placeholder="Spot Location"></input>')}]),angular.module("spot/header/header.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/header/header.tpl.html",'<div  ui-view="spot.header" autoscroll="false">\n	<div class="pull-left">\n		<h1 style="margin-top:0;margin-bottom:0">\n			<strong>{{spot.title}}</strong>\n		</h1>\n	</div>\n\n	<div class="pull-right" style="padding-left:8px" autoscroll="false">\n		<a class="btn btn-default" ui-sref="spot.edit"><small><i class="fa fa-edit"></i></small> Edit</a>\n	</div>\n\n	<div class="pull-right" style="padding-left:8px">\n		<button class="btn btn-default" type="button"><i class="fa fa-bookmark"></i> <b>SAVE</b></button>\n	</div>\n	<div class="pull-right">\n		<div class="btn btn-group" style="padding:0">\n			<button class="btn btn-default" type="button"><i class="fa fa-heart"></i></button>\n			<button class="btn btn-default" type="button" disabled><b>{{spot.likes.length}}</b></button>\n		</div>\n	</div>\n	<div style="clear:both"></div>\n	<p style="margin-bottom:0;margin-top:7px" class="pull-left"><i class="fa fa-home"></i> {{spot.address.value}}</p>\n	<div class="pull-right" style="padding-left:8px">\n		<div class="input-group" style="width:180px">\n			<input type="text" class="form-control" value="http://...">\n			<span class="input-group-btn">\n				<button class="btn btn-default" type="button"><b>SHARE IT</b></button>\n			</span>\n		</div>\n	</div>\n\n	<div style="clear:both"></div>\n</div>')}]),angular.module("spot/spot.edit.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/spot.edit.tpl.html",'<div class="panel panel-default panel-body">\n	<h3 style="margin:0">\n		<span class="label label-primary">EDIT MODE</span>\n		<div class="pull-right" style="padding-left:8px" autoscroll="false">\n			<button class="btn btn-success" ng-click="save()">SAVE CHANGES</button>\n		</div>\n	</h3>\n</div>')}]),angular.module("spot/spot.new.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/spot.new.tpl.html","html")}]),angular.module("spot/spot.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/spot.tpl.html",'<div class="container">\n	\n	<div ui-view="spot.edit.toolbar" autoscroll="false"></div>\n\n	<div class="panel panel-default">\n		<!-- PANEL HEADING -->\n		<div class="panel-heading" ng-include="\'spot/header/header.tpl.html\'"></div>\n\n\n\n		<!-- PANEL BODY -->\n		<div class="panel-body">\n			<!-- MAP TITLE -->\n\n\n			<div  style="clear:both" id="map-left" class="col-lg-12" ng-if="editMode">\n				<div class="panel panel-default">\n					<div class="panel-body">\n						<map loc="{{spot.loc}}" mode="{{mapMode()}}" on-move="updateAddress(loc)" class="map"></map>\n					</div>\n				</div>\n			</div>\n			<!-- LEFT ZONE -->\n			<div  style="clear:both" id="map-left" class="col-lg-9">      \n				<!-- TABS -->\n				\n				<div class="panel panel-default panel-body" ng-if="!editMode">\n					<div class="row">\n						<img src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg" class="col-lg-5">\n						<div class="col-lg-7">\n						\n							<div style="margin-bottom:7px">\n								<i class="icon icon_trekking fa-3x img-thumbnail fa-fw" style="color:#031634"></i>\n								<i class="icon icon_skiing fa-3x img-thumbnail fa-fw" style="color:#031634"></i>\n								<i class="icon icon_swimming fa-3x img-thumbnail fa-fw" style="color:#031634"></i>\n							</div>\n								<!--<p><rating value="3.5" max="max" readonly="false" on-hover="hoveringOver(value)" rating-states="ratingStates" on-leave="overStar = null" style="font-size:2em;color:#CDB380;"></rating> based on <strong><a href ng-click="scrollToStories()">{{comments.length}} stories</a></strong></p>-->\n							<div class="row">\n								<div class="col-lg-4">\n									<h4 style="font-size:2.5em;font-weight:bold;margin-bottom:1px">1,854</h4>\n									<small>LOVES</small>\n									<h4 style="font-size:2.5em;font-weight:bold;margin-bottom:1px">44</h4>\n									<small>COMMENTS</small>\n									<h4 style="font-size:2.5em;font-weight:bold;margin-bottom:1px">12,423</h4>\n									<small>VIEWS</small>\n								</div>\n								<div class="col-lg-8">\n									\n								</div>\n							</div>\n						</div>\n					</div>\n					<div style="display:block;position:relative;margin: 10px -15px -14px; padding-left:-20px; background-color:#f5f5f5;height:65px;">\n						<div id="carousel-spot" class="story-carousel">\n							<ul class="amazingslider-slides" style="display:none;">\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n							</ul>\n							<ul class="amazingslider-thumbnails" style="display:none;">\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<li>\n									<img ng-src="http://www.raquette-evasion.com/ori-trek-randonnee-vercors-690-euros-403_382.jpg"/>\n								</li>\n								<div display-slider slider-id="carousel-spot"></div>\n							</ul>\n						</div>\n					</div>\n				</div>\n				\n				<div ng-controller="TopoController" ng-include="\'spot/topo/topo.tpl.html\'"></div>\n				\n\n				<!-- STORIES -->\n				<div class="panel panel-default" id="stories" ng-if="!editMode">\n					<ul class="nav nav-tabs header-tabs">\n						<li><a href="#stories" data-toggle="tab3"><b>Stories ({{comments.length}})</b></a></li>\n						<div class="pull-right" data-ui-view="comment.action">\n							<a class="btn btn-primary" ui-sref="spot.comment"><i class="fa fa-plus-sign"></i> Add a Story</a>\n						</div>\n					</ul>\n					<div class="panel-body">\n						<div data-ui-view="comment.form"></div>\n						<div data-ng-repeat="comment in comments | orderBy:\'modificationDate\':true">\n							<div ng-include src="\'spot/comment/comment.tpl.html\'"></div>\n						</div>\n					</div>\n				</div>\n			</div>\n			<!-- RIGHT ZONE -->\n			<div id="map-right" class="col-lg-3">\n				<!-- 	<div class="col-lg-12" style="text-align:center">\n						<span style="font-size:3em;font-family: \'Candal\', sans-serif;"><i class="fa fa-comments"></i> 47</span>\n					</div>\n				</div>-->\n				<!-- MAP -->\n				<div class="panel panel-default" ng-if="!editMode">\n					<div class="panel-body">\n						<map loc="{{spot.loc}}" mode="{{mapMode()}}" class="map"></map>\n					</div>\n				</div>\n\n				<!-- DATA -->\n				<div ng-controller="DataController" ng-include="\'spot/data/data.tpl.html\'"></div>\n			</div>\n		</div>\n	</div>\n</div>\n\n<!-- JS DOM -->\n<script>\n\n$(document).ready(function(){\n\n	$(\'.header-tabs a\').click(function (e) {\n		e.preventDefault();\n		$(this).tab(\'show\');\n	})\n	$(\'.header-tabs\').each(function(){\n		$(this).find(\'a:first\').tab(\'show\');\n	});\n\n	jQuery("#slideshow").amazingslider({\n\n		jsfolder:\'/static/img/\',\n		width:690,\n		height:500,\n		skinsfoldername:"",\n		loadimageondemand:false,\n		isresponsive:true,\n		autoplayvideo:false,\n		pauseonmouseover:false,\n		addmargin:true,\n		randomplay:false,\n		playvideoonclickthumb:true,\n		slideinterval:5000,\n		enabletouchswipe:true,\n		transitiononfirstslide:false,\n		loop:0,\n		autoplay:false,\n		navplayvideoimage:"play-32-32-0.png",\n		navpreviewheight:60,\n		timerheight:2,\n		shownumbering:false,\n		skin:"Gallery",\n		textautohide:false,\n		addgooglefonts:true,\n		navshowplaypause:true,\n		navshowplayvideo:true,\n		navshowplaypausestandalonemarginx:8,\n		navshowplaypausestandalonemarginy:8,\n		navbuttonradius:0,\n		navthumbnavigationarrowimageheight:32,\n		navpreviewarrowheight:8,\n		showshadow:false,\n		navfeaturedarrowimagewidth:16,\n		navpreviewwidth:120,\n		googlefonts:"Inder",\n		textpositionmarginright:24,\n		bordercolor:"#ffffff",\n		navthumbnavigationarrowimagewidth:32,\n		navthumbtitlehovercss:"text-decoration:underline;",\n		arrowwidth:32,\n		texteffecteasing:"easeOutCubic",\n		texteffect:"",\n		navspacing:8,\n		navarrowimage:"navarrows-28-28-0.png",\n		ribbonimage:"ribbon_topleft-0.png",\n		navwidth:52,\n		showribbon:false,\n		arrowtop:50,\n		timeropacity:0.6,\n		navthumbnavigationarrowimage:"carouselarrows-32-32-0.png",\n		navshowplaypausestandalone:false,\n		navpreviewbordercolor:"#ffffff",\n		ribbonposition:"topleft",\n		navthumbdescriptioncss:"display:block;position:relative;padding:2px 4px;text-align:left;font:normal 12px Arial,Helvetica,sans-serif;color:#333;",\n		navborder:2,\n		navthumbtitleheight:20,\n		textpositionmargintop:24,\n		navswitchonmouseover:false,\n		playvideoimage:"playvideo-64-64-0.png",\n		arrowimage:"arrows-32-32-0.png",\n		textstyle:"static",\n		playvideoimageheight:64,\n		navfonthighlightcolor:"#666666",\n		showbackgroundimage:false,\n		navpreviewborder:4,\n		navopacity:0.8,\n		shadowcolor:"#aaaaaa",\n		navbuttonshowbgimage:true,\n		navbuttonbgimage:"navbuttonbgimage-28-28-0.png",\n		textbgcss:"display:block; position:absolute; top:0px; left:0px; width:100%; height:100%; background-color:#fff; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; opacity:0.7; filter:alpha(opacity=70);",\n		playvideoimagewidth:64,\n		bottomshadowimagewidth:110,\n		showtimer:true,\n		navradius:0,\n		navshowpreview:false,\n		navmarginy:8,\n		navmarginx:8,\n		navfeaturedarrowimage:"featuredarrow-16-8-0.png",\n		navfeaturedarrowimageheight:8,\n		navstyle:"thumbnails",\n		textpositionmarginleft:24,\n		descriptioncss:"display:block; position:relative; font:14px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#333;",\n		navplaypauseimage:"navplaypause-48-48-0.png",\n		backgroundimagetop:-10,\n		arrowstyle:"mouseover",\n		timercolor:"#ffffff",\n		numberingformat:"%NUM/%TOTAL ",\n		navfontsize:12,\n		navhighlightcolor:"#333333",\n		navimage:"bullet-24-24-5.png",\n		navheight:52,\n		navshowplaypausestandaloneautohide:true,\n		navbuttoncolor:"",\n		navshowarrow:false,\n		navshowfeaturedarrow:true,\n		titlecss:"display:block; position:relative; font: 16px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#000;",\n		ribbonimagey:0,\n		ribbonimagex:0,\n		navshowplaypausestandaloneposition:"bottomright",\n		shadowsize:5,\n		arrowhideonmouseleave:1000,\n		navshowplaypausestandalonewidth:48,\n		navshowplaypausestandaloneheight:48,\n		backgroundimagewidth:120,\n		navcolor:"#999999",\n		navthumbtitlewidth:120,\n		navpreviewposition:"top",\n		arrowheight:32,\n		arrowmargin:8,\n		texteffectduration:1000,\n		bottomshadowimage:"bottomshadow-110-95-4.png",\n		border:6,\n		timerposition:"bottom",\n		navfontcolor:"#333333",\n		navthumbnavigationstyle:"arrow",\n		borderradius:0,\n		navbuttonhighlightcolor:"",\n		textpositionstatic:"bottom",\n		navthumbstyle:"imageonly",\n		textcss:"display:block; padding:8px 16px; text-align:left; ",\n		navbordercolor:"#ffffff",\n		navpreviewarrowimage:"previewarrow-16-8-0.png",\n		showbottomshadow:true,\n		navdirection:"horizontal",\n		textpositionmarginstatic:0,\n		backgroundimage:"",\n		navposition:"bottom",\n		navpreviewarrowwidth:16,\n		bottomshadowimagetop:95,\n		textpositiondynamic:"bottomleft",\n		navshowbuttons:false,\n		navthumbtitlecss:"display:block;position:relative;padding:2px 4px;text-align:left;font:bold 14px Arial,Helvetica,sans-serif;color:#333;",\n		textpositionmarginbottom:24,\n		transition:""\n	});\n\njQuery(".story-carousel").each(function(){\n	$(this).amazingslider({\n		lightboxmode:true,\n		lightboxid:$(this).attr(\'id\'),\n		jsfolder:\'/static/img/\',\n		width:690,\n		height:0,\n		skinsfoldername:"",\n		loadimageondemand:false,\n		isresponsive:true,\n		autoplayvideo:false,\n		pauseonmouseover:false,\n		addmargin:true,\n		randomplay:false,\n		playvideoonclickthumb:true,\n		slideinterval:5000,\n		enabletouchswipe:true,\n		transitiononfirstslide:false,\n		loop:0,\n		autoplay:false,\n		navplayvideoimage:"play-32-32-0.png",\n		navpreviewheight:60,\n		timerheight:2,\n		shownumbering:false,\n		skin:"Gallery",\n		textautohide:false,\n		addgooglefonts:true,\n		navshowplaypause:true,\n		navshowplayvideo:true,\n		navshowplaypausestandalonemarginx:8,\n		navshowplaypausestandalonemarginy:8,\n		navbuttonradius:0,\n		navthumbnavigationarrowimageheight:32,\n		navpreviewarrowheight:8,\n		showshadow:false,\n		navfeaturedarrowimagewidth:16,\n		navpreviewwidth:120,\n		googlefonts:"Inder",\n		textpositionmarginright:24,\n		bordercolor:"#ffffff",\n		navthumbnavigationarrowimagewidth:32,\n		navthumbtitlehovercss:"text-decoration:underline;",\n		arrowwidth:32,\n		texteffecteasing:"easeOutCubic",\n		texteffect:"",\n		navspacing:8,\n		navarrowimage:"navarrows-28-28-0.png",\n		ribbonimage:"ribbon_topleft-0.png",\n		navwidth:52,\n		showribbon:false,\n		arrowtop:50,\n		timeropacity:0.6,\n		navthumbnavigationarrowimage:"carouselarrows-32-32-0.png",\n		navshowplaypausestandalone:false,\n		navpreviewbordercolor:"#ffffff",\n		ribbonposition:"topleft",\n		navthumbdescriptioncss:"display:block;position:relative;padding:2px 4px;text-align:left;font:normal 12px Arial,Helvetica,sans-serif;color:#333;",\n		navborder:2,\n		navthumbtitleheight:20,\n		textpositionmargintop:24,\n		navswitchonmouseover:false,\n		playvideoimage:"playvideo-64-64-0.png",\n		arrowimage:"arrows-32-32-0.png",\n		textstyle:"static",\n		playvideoimageheight:64,\n		navfonthighlightcolor:"#666666",\n		showbackgroundimage:false,\n		navpreviewborder:4,\n		navopacity:0.8,\n		shadowcolor:"#aaaaaa",\n		navbuttonshowbgimage:false,\n		navbuttonbgimage:"navbuttonbgimage-28-28-0.png",\n		textbgcss:"display:block; position:absolute; top:0px; left:0px; width:100%; height:100%; background-color:#fff; -webkit-border-radius: 2px; -moz-border-radius: 2px; border-radius: 2px; opacity:0.7; filter:alpha(opacity=70);",\n		playvideoimagewidth:64,\n		bottomshadowimagewidth:110,\n		showtimer:false,\n		navradius:0,\n		navshowpreview:false,\n		navmarginy:8,\n		navmarginx:8,\n		navfeaturedarrowimage:"featuredarrow-16-8-0.png",\n		navfeaturedarrowimageheight:8,\n		navstyle:"thumbnails",\n		textpositionmarginleft:24,\n		descriptioncss:"display:block; position:relative; font:14px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#333;",\n		navplaypauseimage:"navplaypause-48-48-0.png",\n		backgroundimagetop:-10,\n		arrowstyle:"mouseover",\n		timercolor:"#ffffff",\n		numberingformat:"%NUM/%TOTAL ",\n		navfontsize:12,\n		navhighlightcolor:"#333333",\n		navimage:"bullet-24-24-5.png",\n		navheight:52,\n		navshowplaypausestandaloneautohide:true,\n		navbuttoncolor:"",\n		navshowarrow:false,\n		navshowfeaturedarrow:false,\n		titlecss:"display:block; position:relative; font: 16px Inder,Arial,Tahoma,Helvetica,sans-serif; color:#000;",\n		ribbonimagey:0,\n		ribbonimagex:0,\n		navshowplaypausestandaloneposition:"bottomright",\n		shadowsize:0,\n		arrowhideonmouseleave:1000,\n		navshowplaypausestandalonewidth:48,\n		navshowplaypausestandaloneheight:48,\n		backgroundimagewidth:120,\n		navcolor:"#999999",\n		navthumbtitlewidth:120,\n		navpreviewposition:"top",\n		arrowheight:32,\n		arrowmargin:8,\n		texteffectduration:1000,\n		bottomshadowimage:"bottomshadow-110-95-4.png",\n		border:6,\n		timerposition:"bottom",\n		navfontcolor:"#333333",\n		navthumbnavigationstyle:"arrow",\n		borderradius:0,\n		navbuttonhighlightcolor:"",\n		textpositionstatic:"bottom",\n		navthumbstyle:"imageonly",\n		textcss:"display:block; padding:8px 16px; text-align:left; ",\n		navbordercolor:"#ffffff",\n		navpreviewarrowimage:"previewarrow-16-8-0.png",\n		showbottomshadow:false,\n		navdirection:"horizontal",\n		textpositionmarginstatic:0,\n		backgroundimage:"",\n		navposition:"bottom",\n		navpreviewarrowwidth:16,\n		bottomshadowimagetop:95,\n		textpositiondynamic:"bottomleft",\n		navshowbuttons:false,\n		navthumbtitlecss:"display:block;position:relative;padding:2px 4px;text-align:left;font:bold 14px Arial,Helvetica,sans-serif;color:#333;",\n		textpositionmarginbottom:24,\n		transition:""\n	});\n});\n\n$(\'[class^=amazingslider-slider-]\').hide();\n'+"$('[class^=amazingslider-nav-]').css('background-color','#f5f5f5');\n$('.amazingslider-slider-0').show();\n\n});\n\n</script>")
}]),angular.module("spot/topo/topo.edit.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/topo/topo.edit.tpl.html",'<div class="row">\n	<div class="col-lg-12">\n		<TEXTAREA rich-text-editor ng-model="topo.text" rows="50" style="width:100%;border:0;background:none"></TEXTAREA>\n	</div>\n</div>\n\n<script>\n	// var offset = $("#topo-tab").offset().top - 70;\n	// $(\'html, body\').animate({   \n	//   scrollTop: offset\n	// }, 500);\n</script>')}]),angular.module("spot/topo/topo.tpl.html",[]).run(["$templateCache",function(a){a.put("spot/topo/topo.tpl.html",'<!-- TOPO -->\n<div class="panel panel-default" id="topo">\n	<ul class="nav nav-tabs header-tabs">\n		<li><a href="#topo-tab" data-toggle="tab2"><b>Topo</b></a></li>\n	</ul>\n	<div class="panel-body tab-pane" id="topo-tab" data-ui-view="topo.main" autoscroll="false">\n		<div class="row">\n			<div class="col-lg-12" data-ng-bind-html="safeTopoText"></div>\n		</div>\n	</div>\n</div>\n<script>\n$(document).ready(function(){\n\n	$(\'.header-tabs a\').click(function (e) {\n		e.preventDefault();\n		$(this).tab(\'show\');\n	})\n	$(\'.header-tabs\').each(function(){\n'+"		$(this).find('a:first').tab('show');\n	});\n});\n</script>")}]),angular.module("user/user.tpl.html",[]).run(["$templateCache",function(a){a.put("user/user.tpl.html",'<div class="container">\n    <div class="panel panel-default">\n        <!-- PANEL HEADING -->\n        <ul class="nav nav-tabs header-tabs">\n            <li><a href="#profile" data-toggle="profile"><b>{{currentUser.username}}</b></a></li>\n            <li><a href="#photos" data-toggle="photos"><b>Photos (134)</b></a></li>\n            <li><a href="#activity" data-toggle="activity"><b>Activity</b></a></li>\n            <li><a href="#settings" data-toggle="settings"><b>Settings</b></a></li>\n        </ul>\n        <!-- PANEL BODY -->\n        <div class="tab-content">\n	        <div class="panel-body tab-pane" id="profile">\n	            Profile for \n	        </div>\n	        <div class="panel-body tab-pane" id="photos">\n	            All Photos\n	        </div>\n	        <div class="panel-body tab-pane" id="activity">\n	            Activity\n	        </div>\n	        <div class="panel-body tab-pane" id="settings">\n	            Settings\n	        </div>\n	    </div>\n    </div>\n</div>\n\n<script>\n\n$(document).ready(function(){\n\n	$(\'.header-tabs a\').click(function (e) {\n		e.preventDefault();\n		$(this).tab(\'show\');\n	})\n	$(\'.header-tabs\').each(function(){\n'+"		$(this).find('a:first').tab('show');\n	});\n});\n\n</script>")}]),angular.module("templates.common",["directives/spotList/spot.popup.tpl.html","directives/spotList/spot.tpl.html","security/login/form.tpl.html","security/login/toolbar.tpl.html"]),angular.module("directives/spotList/spot.popup.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/spotList/spot.popup.tpl.html",'<div class="row" style="width:400px">\n	<div class="spot-infos col-lg-12" style="margin-bottom:15px">\n		<span class="spot-icon-container">\n			<button class="btn btn-default btn-select">\n				<span style="font-size:1.2em;">\n					<b>{{spot.index}}</b>\n				</span>\n			</button>\n		</span>\n		<div class="spot-info-container">\n			<h4 class="list-group-item-heading">\n				<a href="#/spot/{{spot._id}}" role="spot-title"><b>{{spot.title}}</b></a>\n				<div id="map-tags-container">        \n					<span id="map-tags">\n						<span style="display:inline-block">\n							<!--<span ng-class="tagClass($index)">{{tag}}</span>-->\n							<small>4, Place de Damloup, 31000 Toulouse, France</small>\n						</span> \n					</span> \n				</div>\n			</h4>\n		</div>\n	</div>\n	<div class="clearfix"></div>\n	<div class="panel-default" style="margin-bottom:-14px;margin-left:-5px;margin-right:-5px;">\n		<div class="panel-heading" style="border:0;border-radius:0">\n			<div class="row">\n				<div class="col-xs-7">\n					<i class="icon icon_swimming fa-2x img-thumbnail" style="padding:5px;width:37px"></i> <i class="icon icon_biking fa-2x img-thumbnail" style="padding:5px;width:37px"></i> <i class="icon icon_skiing fa-2x img-thumbnail" style="padding:5px;width:37px"></i>\n				</div>\n				<div class="col-xs-3 pull-right"><h4 style="margin-top:0px;margin-bottom:0px"><b>32</b></h4><small>COMMENTS</small></div>\n				<div class="col-xs-2 pull-right"><h4 style="margin-top:0px;margin-bottom:0px"><b>1,324</b></h4><small>LOVES</small></div>\n			</div>\n		</div>\n	</div>\n</div>')}]),angular.module("directives/spotList/spot.tpl.html",[]).run(["$templateCache",function(a){a.put("directives/spotList/spot.tpl.html",'<div class="panel panel-default" role="spot-item" style="margin-bottom:8px" id="spot-{{_id}}" ng-class="{\'spot-selected\': isSelected}">\n  <div class="panel-body" ng-click="isSelected=true">\n    <div class="row">\n      <div class="spot-infos col-lg-12" ng-mouseover="isSelected=true">\n        <span class="spot-icon-container visible-lg visible-sm visible-md">\n          <button class="btn btn-default btn-select"><span style="font-size:1.2em;"><b>{{displayIndex}}</b></span></button>\n        </span>\n        <div class="spot-info-container" id="spot-info-{{id}}">\n          <!-- <button class="btn btn-default pull-right" ng-click="selectSpot(spot)"><i class="icon-map-marker icon-large"></i></button> -->\n          <h4 class="list-group-item-heading">\n            <div class="pull-right">\n              \n            </div>\n            <a ui-sref="spot({ id:_id })" role="spot-title" ng-click="$event.stopPropagation()"><b>{{title}}</b></a></br>\n            <div id="map-tags-container">        \n              <span id="map-tags">\n                <span style="display:inline-block">\n                  <!--<span ng-class="tagClass($index)">{{tag}}</span>-->\n                  <small>{{address.value}}</small>\n                </span> \n              </span> \n            </div>\n          </h4>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="panel-heading">\n    <div class="row">\n      <div class="col-xs-7">\n        <i class="icon icon_swimming fa-2x img-thumbnail" style="padding:5px;width:37px"></i> <i class="icon icon_biking fa-2x img-thumbnail" style="padding:5px;width:37px"></i> <i class="icon icon_skiing fa-2x img-thumbnail" style="padding:5px;width:37px"></i>\n      </div>\n      <div class="col-xs-3 pull-right"><h4 style="margin-top:0px;margin-bottom:0px"><b>32</b></h4><small>COMMENTS</small></div>\n      <div class="col-xs-2 pull-right"><h4 style="margin-top:0px;margin-bottom:0px"><b>1,324</b></h4><small>LOVES</small></div>\n    </div>\n  </div>\n</div>')}]),angular.module("security/login/form.tpl.html",[]).run(["$templateCache",function(a){a.put("security/login/form.tpl.html",'<div class="modal-header">\n    <h4>Sign in</h4>\n</div>\n<div class="modal-body">\n    <div class="alert alert-warning" ng-show="authReason">\n        {{authReason}}\n    </div>\n    <div class="alert alert-error" ng-show="authError">\n        {{authError}}\n    </div>\n    <div class="alert alert-info">Please enter your login details</div>\n    <form name="user.form" novalidate class="login-form form-inline">\n        <fieldset>\n            <div class="form-group">\n                <input class="form-control input-lg" style="width:228px" placeholder="E-mail" name="username" ng-model="user.username" type="email" required autofocus>\n            </div>\n            <div class="form-group">\n                <input class="form-control input-lg" style="width:228px" placeholder="Password" name="password" type="password" ng-model="user.password" value="">\n            </div>\n            <div class="form-group">\n                <input class="btn btn-lg btn-success" type="submit" ng-click="login()" value="Login">\n            </div>\n        </fieldset>\n    </form>\n    <h4 style="text-align:center">or</h4>\n    <a class="btn btn-lg btn-primary btn-block" id="sign-in-google"><i class="icon-google-plus"></i> Sign In with Google</a>\n    <a class="btn btn-lg btn-primary btn-block" id="sign-in-twitter"><i class="icon-twitter"></i> Sign In with Twitter</a>\n    \n</div>')}]),angular.module("security/login/toolbar.tpl.html",[]).run(["$templateCache",function(a){a.put("security/login/toolbar.tpl.html",'<ul class="pull-right nav navbar-nav visible-lg visible-md visible-sm">\n	<li ng-if="!isAuthenticated()"><a ng-click="login()">Sign In</a></li>\n	<form ng-if="!isAuthenticated()" class="navbar-form navbar-left" role="signup">\n	    <button type="submit" class="btn btn-success">Sign Up</button>\n	</form>\n	<!-- else -->\n    <li ng-if="isAuthenticated()"><a ui-sref="activity"><i class="icon-globe icon-large"></i> Activity</a></li>\n    <li ng-if="isAuthenticated()" class="dropdown nav-img">\n        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><img src="static/img/Avatar-128.png" class="img-small"> {{currentUser.username}}</a>\n        <ul class="dropdown-menu">\n          <li><a ui-sref="user">Profile</a></li>\n          <li><a ng-click="logout()">Logout</a></li>\n        </ul>\n    </li>\n</ul>')}]);